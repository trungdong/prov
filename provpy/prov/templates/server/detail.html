{# Copyright (C) 2011 University of Southampton #}
{% extends "base.html" %}
{% load url from future %}
{% load guardian_tags %}
{% block title %}PROVServer Detail{% endblock %}
{% block content %}
      <div class="row span12">
        <h1>Bundle {{ bundle.content.rec_id }}</h1>
        <a class="btn btn-primary pull-right" onClick="go_to('/prov/home');">Back</a>
        <h2>PROV-N</h2>
		<pre name="content">{{ prov_n }}</pre>
		<h2>PROV-JSON</h2>
		{% get_obj_perms user for bundle as 'perms' %}
		<pre name="json" id="json"
		{% if 'change_container' in perms %}
		contentEditable="true"
		{% endif %}>{{ prov_json }}</pre>
      </div>
      <span class="span4">
	      <form action="{% url 'server.views.bundle_detail' bundle.id %}" method="post" id="PUT_form"
	      onSubmit="return (function(){document.getElementById('input_json').value = document.getElementById('json').firstChild.data;})()">
	          {% csrf_token %}
	       	  <button class="btn btn-success offset2" type="submit" value="Save" 
	          {% if 'change_container' not in perms %}
	          disabled="true"
			  {% endif %}>Save</button>
			  <input type="hidden" name="json" id="input_json" value=""/>
		  </form>
	  </span>
      <span class="span3">
        <form action="{% url 'server.views.profile' %}" method="post" >
          {% csrf_token %}
          <button class="btn btn-danger offset1" type="submit" value="Delete"
          {% if 'delete_container' not in perms %}
          disabled="true"
		  {% endif %}>Delete </button>
          <input type="hidden" name="delete_id" value="{{ bundle.id }}" />	
        </form>
      </span>
      <span class="span4">
      	<input class="btn btn-primary offset1" type="button" onClick="go_to('/prov/home');" value="Back"/> 
      </span>
{% endblock %}
