<!DOCTYPE html>

<html><head> 
    <title>The PROV-JSON Serialization</title> 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
    <!-- 
      === NOTA BENE ===
      For the three scripts below, if your spec resides on dev.w3 you can check them
      out in the same tree and use relative links so that they'll work offline,
     -->
<!-- PM -->
    <style type="text/css">
      .note { font-size:small; margin-left:50px }
     .code-comment {
	color: #808080;
}
    .code-new {
	color: #000080;
}
    </style>

<script src="http://dev.w3.org/2009/dap/ReSpec.js/js/respec.js" class="remove"></script> 

    <script class="remove"> 
      var addExtraReferences = function() {
          for (var k in extraReferences)
              berjon.biblio[k] = extraReferences[k];
      };
      var extraReferences = {
		  "PROV-DM":
          "Luc Moreau, Paolo Missier"+
          "<a href=\"http://www.w3.org/TR/prov-dm/\"><cite>The PROV Data Model and Abstract Syntax Notation</cite></a>. "+
          "2011, Work in progress. "+
          "URL: <a href=\"http://www.w3.org/TR/prov-dm/\">http://www.w3.org/TR/prov-dm/</a>",
/*        "PROV-SEMANTICS":
          "James Cheney "+
          "<a href=\"http://www.w3.org/2011/prov/wiki/FormalSemanticsStrawman\"><cite>Formal Semantics Strawman</cite></a>. "+
          "2011, Work in progress. "+
          "URL: <a href=\"http://www.w3.org/2011/prov/wiki/FormalSemanticsStrawman\">http://www.w3.org/2011/prov/wiki/FormalSemanticsStrawman</a>",

        "PROV-PRIMER":
          "Yolanda Gil and Simon Miles "+
          "<a href=\"http://dvcs.w3.org/hg/prov/raw-file/default/primer/Primer.html\"><cite>Prov Model Primer</cite></a>. "+
          "2011, Work in progress. "+
          "URL: <a href=\"http://dvcs.w3.org/hg/prov/raw-file/default/primer/Primer.html\">http://dvcs.w3.org/hg/prov/raw-file/default/primer/Primer.html</a>",

        "PROV-O":
          "Satya Sahoo and Deborah McGuinness "+
          "<a href=\"http://dvcs.w3.org/hg/prov/raw-file/default/ontology/ProvenanceFormalModel.html\"><cite>Provenance Formal Model</cite></a>. "+
          "2011, Work in progress. "+
          "URL: <a href=\"http://dvcs.w3.org/hg/prov/raw-file/default/ontology/ProvenanceFormalModel.html\">http://dvcs.w3.org/hg/prov/raw-file/default/ontology/ProvenanceFormalModel.html</a>",

        "PROV-PAQ":
          "Graham Klyne and Paul Groth "+
          "<a href=\"http://dvcs.w3.org/hg/prov/raw-file/tip/paq/provenance-access.html\"><cite>Provenance Access and Query</cite></a>. "+
          "2011, Work in progress. "+
          "URL: <a href=\"http://dvcs.w3.org/hg/prov/raw-file/tip/paq/provenance-access.html\">http://dvcs.w3.org/hg/prov/tip/paq/provenance-access.html</a>",
*/      };
      var respecConfig = {
          // specification status (e.g. WD, LCWD, NOTE, etc.). If in doubt use ED.
          specStatus:           "unofficial",
          
          // the specification's short name, as in http://www.w3.org/TR/short-name/
          shortName:            "prov-json",
 
          // if your specification has a subtitle that goes below the main
          // formal title, define it here
          subtitle   :  "Working draft for internal discussion",
 
          // if you wish the publication date to be other than today, set this
          // publishDate:  "2011-10-18",
 
          // if the specification's copyright date is a range of years, specify
          // the start date here:
          // copyrightStart: "2005"
 
          // if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
          // and its maturity status
          // previousPublishDate:  "2011-10-18",
          // previousMaturity:  "FPWD",
 
          // if there a publicly available Editor's Draft, this is the link
          edDraftURI:           "http://dvcs.w3.org/hg/prov/raw-file/default/model/JSON.html",
 
          // if this is a LCWD, uncomment and set the end of its review period
          // lcEnd: "2009-08-05",
 
          // if you want to have extra CSS, append them to this list
          // it is recommended that the respec.css stylesheet be kept
          extraCSS:             ["http://dev.w3.org/2009/dap/ReSpec.js/css/respec.css", "./extra.css"],
 
          // editors, add as many as you like
          // only "name" is required
          editors:  [
              { name: "Trung Dong Huynh", url: "http://users.ecs.soton.ac.uk/tdh/",
                company: "University of Southampton" },
          ],
 
          // authors, add as many as you like. 
          // This is optional, uncomment if you have authors as well as editors.
          // only "name" is required. Same format as editors.
 
          authors:  [
              { name: "Michael O. Jewell", url: "http://www.ecs.soton.ac.uk/people/moj",
			  	company: "University of Southampton" },
              { name: "Amir Sezavar Keshavarz", url: "http://www.ecs.soton.ac.uk/people/ask2g10",
			  	company: "University of Southampton" },              { name: "Danius T. Michaelides", url: "http://users.ecs.soton.ac.uk/dtm/",
			  	company: "University of Southampton" },
              { name: "Luc Moreau", url: "http://users.ecs.soton.ac.uk/lavm/",
			  	company: "University of Southampton" },
              { name: "Huanjia Yang", url: "http://www.ecs.soton.ac.uk/people/hy2",
			  	company: "University of Southampton" },
          ],
          
          // name of the WG
          wg:           "Provenance Working Group",
          
          // URI of the public WG page
          wgURI:        "http://www.w3.org/2011/prov/",
          
          // name (with the @w3c.org) of the public mailing to which comments are due
          wgPublicList: "public-prov-wg",
          
          // URI of the patent status for this WG, for Rec-track documents
          // !!!! IMPORTANT !!!!
          // This is important for Rec-track documents, do not copy a patent URI from a random
          // document unless you know what you're doing. If in doubt ask your friendly neighbourhood
          // Team Contact.
          wgPatentURI:  "http://www.w3.org/2004/01/pp-impl/46974/status",

          // Add extraReferences to bibliography database
          preProcess: [addExtraReferences],
      };
    </script> 
  </head> 
<body> 

<section id="abstract">
<p>
This document specifies a provenance representation in JSON, called PROV-JSON, for the W3C's Provenance Data Model (PROV-DM).</p>
</section> 
   
<section> 
<h2>Introduction</h2> 

<p> 
PROV-JSON is a JSON representation for the Provenance Data Model (PROV-DM). provenance information 
</p>


<p>JSON requirements</p>

<p>Design considerations</p>

<p>What this specification provides</p>

<section> 
<h3>Structure of this Document</h3>

<p><a href="#roadmap">Section 2</a> outlines the plan for a PROV-JSON toolbox that falicitates accessing and manipulating PROV-JSON structures.</p>

<p><a href="#data-typing">Section 3</a> presents the convention for encoding typed values inPROV-JSON.</p>

<p><a href="#prov-json-representation">Section 4</a> specifies the JSON encoding for all PROV-DM records.</p>

<p>Finally, <a href="#extensibility-section">Section 4</a> summarizes PROV-JSON's extensibility points.</p>

<p>In addition, <a href="#prov-json-example">Appendix A</a> provides a PROV-JSON example representation encoding <a href="http://www.w3.org/TR/prov-dm/#prov-dm-example">the PROV-DM's File Scenario</a>.</p>

</section> 

<section id="prov-dm-namespace">
<h3>Namespace</h3>

<p>The PROV-JSON namespace is the same as the PROV-DM namespace, which is <span class="name">http://www.w3.org/ns/prov-dm/</span> (TBC).</p>

<p> All the elements, relations, reserved names and attributes introduced in this specification belong to the PROV-DM namespace.</p>

</section>


<section> 
<h3>Conventions</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this document are to be interpreted as described in [[!RFC2119]].</p>
</section> 

</section> 

<section id="roadmap"> 
<h2>Roadmap</h2>

<div class='issue'>TODO: Provide the specification for the JS toolbox to accompany the PROV-JSON spec here. The requirements for the toolbox to be contributed by all the authors (according to their own requirements)</div>

<p>In conjunction with the PROV-JSON specifications provided in this document, a PROV-JSON toolbox is being developed to facilitate working with PROV-JSON structures. The toolbox will provide the following functionalities:</p>
<ul>
  <li><strong>Querying</strong>: query support for
<ul>
      <li>properties of an element or a relation,</li>
      <li>elements and relations based on their types, and </li>
      <li>inluding/excluding specific types of elements/relations.</li>
    </ul>
  </li>
  <li><strong>Traversing</strong>: the toolbox presents a PROV-JSON structure as a provenance graphs of elements linked by their relations. By so doing, it provides a number of ways to traverse the graph from one element.</li>
  <li><strong>Simple inference</strong>: transivity closure support for transitive relations in PROV-DM</li>
  <li><strong>Editing</strong>: creating and updating provenance graphs</li>
  <li><strong>UI widgets</strong>: generic Javescript UI widgets to support the functionalities above</li>
</ul>

</section>

<section id="data-typing"> 
<h2>JSON Data Typing</h2>

<div class='issue'>TODO: Decide how best to represent objects. Do we need a prov:object, or is a general JSON object enough? Do we represent serialized items with a specific type?</div>

<p>A JSON literal value is defined as being one of an object, array, number, string, boolean, or null. To allow for extra specificity, the data type of a literal in PROV-JSON may be provided using a 2-element array. The first element in this array is the literal value and the second element is the data type, given as a QName or URI. Object and null are not defined here: object may be inferred from the first element, and a null value should simply be omitted from the dictionary. Array is represented with the prov:array type, discussed in the next section.</p>

<p>The following optional mappings apply for the default JSON types:</p>

<dl>
<dt>number</dt>
<dd>xsd:double</dd>
<dt>string</dt>
<dd>xsd:string</dd>
<dt>boolean</dt>
<dd>xsd:boolean</dd>
<dt>array</dt>
<dd>prov:array</dd>
</dl>

<pre class="example">
    "prefix": {
        "x": "http://example.org/",
        "xsd": "http://www.w3.org/2001/XMLSchema-datatypes#"
    },
    ...
    "entity": {
        "e1": {
            "type": "document",
            "hasNote": {
                "ann1": null
            }
            "x:byteSize": [1034, "xsd:positiveInteger"],
            "x:compression": [82.5, "xsd:decimal"],
            "x:content": ["Y29udGVudCBoZXJl", "xsd:base64Binary"],
        }
    }
</pre>

<h3>Representing Arrays</h3>

<p>Some keys in PROV-JSON may have more than one value. To provide an array structure with the data typing approach above, we support the use of 'prov:array' as a data type in the second element of a PROV-JSON literal. It is represented as a JSON array containing a combination of literals and literal/type pairs. For example:</p>

<pre class="example">
    "entity": {
	"e1": {
	    "x:values": [[1, 2, ["a string", "xsd:string"], [1.0, "xsd:double"], [true, "xsd:boolean"]], "prov:array"]
	}
    }
</pre>

</section>


<section id="prov-json-representation"> 

<h2>Representing the Provenance Data Model in JSON</h2>

<p>This section defines the JSON serialization mappings for PROV-DM records.</p>

<section id="PROV-JSON-overview"> 
      
<h3>Overview</h3>

<p>A <span class="nonterminal">recordContainer</span> (see section <a href="#RecordContainer">Record Container</a>) is used to wrap PROV-DM records and facilitate their interchange. In PROV-JSON, it is represented in one JSON structure:</p>

<div class="grammar"><pre>
{
    "entity": { <span class="code-comment">// Map of entities by entities' IDs</span>
    },
    "activity": { <span class="code-comment">// Map of activities by IDs</span>
    },
    "agent": [ <span class="code-comment">// List of IDs of entities asserted as agents</span>
    ],
    "note": { <span class="code-comment">// Map of notes by IDs</span>
    },
    &lt;<i>relationName</i>&gt;: { <span class="code-comment">// A map of relations of type <i>relationName</i> by their IDs</span>
    },
    ...
    "account": { <span class="code-comment">// Map of accounts by IDs</span>
    }
}
</pre></div>

<p>In addition, the top-level container contains an additional object called <span class="name">prefix</span> that defines all namespaces referred in the document.</p>

<div class="grammar"><pre>
{
    "prefix": {
        "default": "http://www.w3.org/ns/prov-dm/",
        ...
    },
    ...
}
</pre></div>

<p>The following sections defines how each PROV-DM record is represented in PROV-JSON.</p>

</section>

<section id="record-element"> 
<h3>Element</h3>

<p>This section describes the JSON representations for all <a href="http://www.w3.org/TR/prov-dm/#record-element">PROV-DM elements</a>: <span class="nonterminal">entityRecord</span>, <span class="nonterminal">activityRecord</span>, <span class="nonterminal">agentRecord</span>, and <span class="nonterminal">noteRecord</span>. In the container to which these elements belong, they are put in separate structures whose names are <span class="name">entity</span>, <span class="name">activity</span>, <span class="name">agent</span>, and <span class="name">note</span>, respectively.</p>


<section id="record-Entity"> 
      
<h4>Entity Record</h4>

<p>In PROV-JSON, each <a href="http://www.w3.org/TR/prov-dm/#record-Entity">entity</a> is represented as a property in the <span class="nonterminal">entity</span> object, identified by the entity's <span class="name">id</span>.The property's value itself is an object structure containing the entity's attribute-values pairs.</p>

The following entity assertion, for example,
<pre class="example">
entity(e0, [ prov:type="File", ex:path="/shared/crime.txt", ex:creator="Alice" ])
</pre>
is serialized into the following structure
<pre class="example">
    ...
    "entity": {
        "e0": {
            "type": "File",
            "ex:path": "/shared/crime.txt",
            "ex:creator": "Alice"
        }
    },
    ...
</pre>
<div class="note">In the example above, since <span class="name">type</span> is a term beloging to the <a href="#prov-dm-namespace">PROV-DM namespace</a>, the use of a prefix is not required.</div>

</section> 

<section id="record-Activity"> 
<h3>Activity Record</h3>

<p>Each <a href="http://www.w3.org/TR/prov-dm/#record-Activity">Activity</a> is represented as a property in the <span class="name">activity</span> object identified by the Activity's <span class="name">id</span>. The property's value itself is an object structure containing the Activity's properties and its other attribute-values pairs.</p>

<p>
The following Activity assertion, for example,</p>
<pre class="example">
activity(a1,add-crime-in-london,2011-11-16T16:05:00,2011-11-16T16:06:00,[ex:host="server.example.org",prov:type="app:edit"])
</pre>
<p>is serialized into:</p>
<pre class="example">
    ...
    "activity": {
        "pe1": {
            "recipeLink": "add-crime-in-london",
            "startTime": ["2011-11-16T16:05:00", "xsd:dateTime"],
            "endTime": ["2011-11-16T16:06:00", "xsd:dateTime"],
            "ex:host": "server.example.org"
            "type": "app:edit"
        }
    },
    ...
</pre>
<div class="note">Extra atribute-value pairs of an activity record are put at the same level with other properties in an activity JSON structure.</div>

<p>The values of <span class="nonterminal">startTime</span> and <span class="nonterminal">endTime</span> MUST conform to xsd:dateTime [[!XMLSCHEMA-2]].</p>
</section> 

<section id="record-Agent">
<h3>Agent Record</h3>

<p>In PROV-DM, an <a href="http://www.w3.org/TR/prov-dm/#record-Agent">agent</a> is a representation of an entity capable of activity. Since an <span class="nonterminal">agentRecord</span> does not have any property, the <span class="name">agent</span> structure in PROV-JSON is organized as an array which contains the identifiers of all the entities that are asserted as agents (i.e. not an object structure like <span class="name">entity</span> or <span class="name">activity</span>).

<pre class="example">
agent(e1, [ex:employee="1234", ex:name="Alice", prov:type="prov:Person" %% xsd:anyURI])
</pre>
is encoded into:
<pre class="example">
    ...
    "entity": {
        "e1": {
            "ex:employee": "1234",
            "ex:name": "Alice",
            "type": ["Person", "xsd:xsd:anyURI"]
        }
        ...
    },
    "agent": ["e1", ...],
    ...
</pre>
<div class="note"> Can we always expect the value of a <span class="name">type</span> property to be a URI?</div>
</section>

<section id="record-note"> 
      
<h4>Note Record</h4>

<p>In PROV-DM, a <a href="http://www.w3.org/TR/prov-dm/#record-note">note</a> is a set of name-value pairs, whose meaning is application specific. It is represented in PROV-JSON as a property of the <span class="name">note</span> object, identified by the note's <span class="name">id</span>. The property's value itself is an object structure containing the note's attribute-values pairs.</p> 

<p>
The following note record, for example,</p>
<pre class="example">
note(ann1,[ex:color="blue", ex:screenX="20" %% xsd:integer, ex:screenY="30" %% xsd:integer])
</pre>
<p>is encoded in PROV-JSON as follows.</p>
<pre class="example">
    ...
    "note": {
        "ann1": {
            "ex:color": "blue",
            "screenX": [20, "xsd:integer"],
            "screenY": [30, "xsd:integer"]
        }
    }
    ...
</pre>

</section> 

</section>


<section id="record-relation">
<h3>Relation</h3>

<p>This section how various <a href="http://www.w3.org/TR/prov-dm/#record-relation">relation records</a> in PROV-DM are serialised in PROV-JSON.</p>

<p>In general, a <span class="nonterminal">relationRecord</span> has the following construct:</p>

<div class='grammar'>
<span class="nonterminal">relationRecord</span>&nbsp;:=  
<span class="nonterminal">relationName</span>
(<span class="nonterminal">identifier1</span>,
<span class="nonterminal">identifier2</span>,
[<span class="nonterminal">additionalProperties</span>],
[<span class="nonterminal">qualifiers</span>])
<br/>
</div>
<p>where <span class="nonterminal">identifier1</span> and <span class="nonterminal">identifier2</span> are identifiers to PROV-DM elements</p>
Relations are grouped by <span class="nonterminal">relationName</span> in a PROV-JSON structure.
<div class="grammar"><pre>
    ...
    "notes": { ... },
    <i>relationName</i>: {
        <span class="code-comment">// relationName(identifier1, identifier2, ...)</span>
        <i>relationID</i>: {
            <i>attribute1</i>: <em>identifier1</em>,
            <i>attribute2</i>: <em>identifier2</em>,
                ...
        },
        <span class="code-comment">// More relationID,identifier1,identifier2 structures here if there are more instances of relationName(...)</span>
    },
    <i>otherRelationName</i>: {
        ...
    },
    ...
</pre></div>
Any values of <span class="nonterminal">additionalProperties</span> and <span class="nonterminal">qualifiers</span> are specified alongside the identifier pairs in above structure.

<p>Since identifiers of relations are optional in PROV-DM, there may be cases where <span class="nonterminal">relationID</span>s are missing. However, they are still required in order to maintain the validity of a PROV-JSON structure. In such cases, it is up to the serialization algorithm to generate a valid identifier for <span class="nonterminal">relationID</span> that is unique internally to a PROV-JSON serialization. For example, the <a href="http://www.w3.org/TeamSubmission/turtle/#nodeID">nodeID production in Turtle</a> may be used for this purpose, e.g. <code>_:A1</code>.</p>

<p>The following sections provide more details on how each type of relation is serialized via typical examples.</p>


<section id="record-Generation">
<h4>Generation Record</h4>

<p>The following <a href="http://www.w3.org/TR/prov-dm/#record-Generation">generation assertions</a></p>
<pre class="example">
  wasGeneratedBy(e1,a1,[ex:port="p1", ex:order="1" %% xsd:integer), 2001-10-26T21:32:52)
  wasGeneratedBy(e2,a1,[ex:port="p1", ex:order="2" %% xsd:integer), 2001-10-26T10:00:00)
</pre>
<p>are serialized as follows.</p>
<pre class="example">
{
    ...
    "wasGeneratedBy": {
        "_:wBG1": {
            "activity": "pe1",
            "entity": "e1",
            "ex:port": "p1",
            "ex:order": [1, xsd:integer],
            "time":  ["2001-10-26T21:32:52", "xsd:dateTime"]
        },
        "_:wBG2": {
            "activity": "pe1",
            "entity": "e2",
            "ex:port": "p1",
            "ex:order": [2, xsd:integer],
            "time":  ["2001-10-26T10:00:00", "xsd:dateTime"]
        },
    },
    ...
}
</pre>
Note that, in the example above, the qualifier's components are unbundled and mixed alongside with the relation's other properties (i.e. <span class="name">time</span>) in the relation's object.
</section>


<section id="record-Usage">
<h3>Usage Record</h3>

<p>The following <a href="http://www.w3.org/TR/prov-dm/#record-Usage">usage records</a></p>
<pre class="example">
  used(a1,e1,[ex:parameter="p1"),2011-11-16T16:00:00)
  used(a1,e2,[ex:parameter="p2"),2011-11-16T16:00:01)
</pre>
<p>are serialized in to PROV-JSON as follows.</p>
<pre class="example">
{
    ...
    "used": {
        "_:u1": {
            "cause": "e1",
            "activity": "a1",
            "ex:parameter": "p1",
            "time": ["2011-11-16T16:00:00", "xsd:dateTime"]
        },
        "_:u2": {
            "cause": "e2",
            "activity": "a1",
            "ex:parameter": "p2",
            "time": ["2011-11-16T16:00:01", "xsd:dateTime"]
        },
    },
    ...
}
</pre>

</section>

<section id="record-ActivityAssociation">
<h3>Activity Association Record</h3>


<p>The following <a href="http://www.w3.org/TR/prov-dm/#record-ActivityAssociation"> activity association records,</a></p>
<pre class="example">
  activity(a,[prov:type="workflow"])
  agent(ag1,[prov:type="programmer"]
  agent(ag2,[prov:type="researcher"]
  wasAssociatedWith(a,ag1,[prov:role="loggedInUser", ex:how="webapp"])
  wasAssociatedWith(a,ag2,[prov:role="designer", ex:context="phd"])
</pre>
<p>are serialized into:</p>
<pre class="example">
{
    ...
    "entity": {
        "ag1": {
            "type": "programmer"
        },
        "ag2": {
            "type": "researcher"
        }
    },
    "activity": {
        "a": {
            "type": "workflow"
        }
    },
    "agent": ["ag1", "ag2"],
    "wasAssociatedWith": {
        "_:wAW1": {
            "activity": "a",
            "agent": "ag1",
            "role": "loggedInUser",
            "ex:how": "webapp"
        },
        "_:wAW2": {
            "activity": "a",
            "agent": "ag2",
            "role": "designer",
            "ex:context": "phd"
        }
    },
    ...
}
</pre>
</section>

<section id="record-Start-End">
<h3>Start and End Records</h3>

The <a href="http://www.w3.org/TR/prov-dm/#record-Start-End">start and end records</a> below
<pre class="example">
  wasStartedBy(a,ag,[ex:mode="manual"])
  wasEndedby(a,ag,[ex:mode="manual"])
</pre>
<p>are serialized into:</p>
<pre class="example">
{
    ...
    "wasStartedBy": {
        "_:wSB1": {
            "activity": "a",
            "agent": "ag",
            "ex:mode": "manual"
        }
    },
    "wasEndedBy": {
        "_:wEB1": {
            "activity": "a",
            "agent": "ag",
            "ex:mode": "manual"
        }
    },
    ...
}
</pre>

</section>

<section id="record-responsibility">
<h3>Responsibility Record</h3>

The <a href="http://www.w3.org/TR/prov-dm/#record-responsibility">responsibility records</a> below
<pre class="example">
  activity(a,[prov:type="workflow"])
  agent(ag1,[prov:type="programmer"]
  agent(ag2,[prov:type="researcher"]
  agent(ag3,[prov:type="funder"]
  wasAssociatedWith(a,ag1,[prov:role="loggedInUser"])
  wasAssociatedWith(a,ag2)
  actedOnBehalfOf(ag1,ag2,a,[prov:type="delegation"])
  actedOnBehalfOf(ag2,ag3,a,[prov:type="contract"])
</pre>
<p>are serialized into:</p>
<pre class="example">
{
    ...
    "entity": {
        "ag1": {
            "type": "programmer"
        },
        "ag2": {
            "type": "researcher"
        },
        "ag3": {
            "type": "funder"
        }
    },
    "activity": {
        "a": {
            "type": "workflow"
        }
    },
    "agent": ["ag1", "ag2", "ag3"],
    "wasAssociatedWith": {
        "_:wAW1": {
            "activity": "a",
            "agent": "ag1",
            "role": "loggedInUser"
        },
        "_:wAW2": {
            "activity": "a",
            "agent": "ag2"
        }
    },
    "actedOnBehalfOf": {
        "_:aOBO1": {
            "subordinate": "ag1",
            "responsible": "ag2",
            "activity": "a",
            "type": "delegation"
        },
        "_:aOBO2": {
            "subordinate": "ag2",
            "responsible": "ag3",
            "activity": "a",
            "type": "contract"
        }
    },
    ...
}
</pre>

</section>

<section id="record-complement-of">

<h3>Complementarity Record</h3>

<p>The <a href="http://www.w3.org/TR/prov-dm/#record-complement-of">complementarity records</a> below</p>
<pre class="example">
  entity(rs,[ex:created="1870" %% xsd:integer])

  entity(rs_l1,[prov:location="loc2"])
  entity(rs_l2,[prov:location="The Mall"])

  entity(rs_m1,[ex:membership="250" %% xsd:integer, ex:year="1900" %% xsd:integer])
  entity(rs_m2,[ex:membership="300" %% xsd:integer, ex:year="1945" %% xsd:integer])
  entity(rs_m3,[ex:membership="270" %% xsd:integer, ex:year="2010" %% xsd:integer])

  wasComplementOf(rs_m3, rs_l2)
  wasComplementOf(rs_m2, rs_l1)
  wasComplementOf(rs_m2, rs_l2)
  wasComplementOf(rs_m1, rs_l1)

  wasComplementOf(rs_m3, rs)
  wasComplementOf(rs_m2, rs)
  wasComplementOf(rs_m1, rs)
  wasComplementOf(rs_l1, rs)
  wasComplementOf(rs_l2, rs)

</pre>
<p>are serialized into:</p>
<pre class="example">
{
    ...
    "entity": {
        "rs": {
            "ex:created": [1870, "xsd:integer"]
        },
        "rs_l1": {
            "location": "loc2"
        },
        "rs_l2": {
            "location": "The Mall"
        },
        "rs_m1": {
            "ex:membership": [250, "xsd:integer"],
            "ex:year": [1900, "xsd:integer"]
        },
        "rs_m2": {
            "ex:membership": [300, "xsd:integer"],
            "ex:year": [1945, "xsd:integer"]
        },
        "rs_m3": {
            "ex:membership": [270, "xsd:integer"],
            "ex:year": [2010, "xsd:integer"]
        },
    },
    "wasComplementOf": {
        "_:wCO1": {
            "TODO": "rs_m3",
            "TODO": "as_l2"
        },
        "_:wCO2": {
            "TODO": "rs_m2",
            "TODO": "as_l1"
        },
        "_:wCO3": {
            "TODO": "rs_m2",
            "TODO": "as_l2"
        },
        "_:wCO4": {
            "TODO": "rs_m1",
            "TODO": "as_l1"
        },
        "_:wCO5": {
            "TODO": "rs_m3",
            "TODO": "rs"
        },
        "_:wCO6": {
            "TODO": "rs_m2",
            "TODO": "rs"
        },
        "_:wCO7": {
            "TODO": "rs_m1",
            "TODO": "rs"
        },
        "_:wCO8": {
            "TODO": "rs_l1",
            "TODO": "rs"
        },
        "_:wCO9": {
            "TODO": "rs_l2",
            "TODO": "rs"
        },
    },
    ...
}
</pre>

</section>


<section id="record-Derivation">
<h3>Derivation Record</h3>


<p>The following <a href="http://www.w3.org/TR/prov-dm/#record-Derivation">derivation assertions</a></p>
<pre class="example">
  used(u2, a4, e3, [ex:channel="in"])
  wasGeneratedBy(g2, e5, a4, [ex:channel="out"])

  wasDerivedFrom(e3,e2)
  wasDerivedFrom(e5,e3,pe4,g2,u2)
</pre>
<p>are represented in PROV-JSON as follows.</p>
<pre class="example">
{
    ...
    "used": {
        "u1": {
            "entity": "e3",
            "activity": "a",
            "ex:channel": "in"
        }
    },
    "wasDerivedFrom": {
        "_:wDF1": {
            "generatedEntity": "e3",
            "usedEntity": "e2"
        },
        "_:wDF2": {
            "generatedEntity": "e5",
            "usedEntity": "e3",
            "activity": "a4"
            "generation": "g2",
            "usage": "u2"
        }
    },
    "wasGeneratedBy": {
        "g2": {
            "activity": "pe4",
            "entity": "e5",
            "ex:channel": "out"
        }
    },
    ...
}
</pre>
<div class="issue">TODO: Define mappings for the remaining forms of derivation. Note that changes to these are being discussed in W3-Prov.</div>

</section>



<section id="record-annotation">
<h4>Annotation Record</h4>

<p>An <a href="http://www.w3.org/TR/prov-dm/#record-annotation">annotation record</a> establishes a link between an identifiable PROV-DM record and an note record referred to by its identifier. Multiple note records can be associated with a given PROV-DM record; symmetrically, multiple PROV-DM records can be associated with a given note record. Since note records have identifiers, they can also be annotated.</p> 

<p>
The following records, for example,</p>
<pre class="example">
  entity(e1,[prov:type="document"])
  entity(e2,[prov:type="document"])
  activity(a,transform,t1,t2,[])
  used(u1,a,e1,[ex:file="stdin"])
  wasGeneratedBy(e2, a, [ex:file="stdout"])

  note(n1,[ex:icon="doc.png"])
  hasAnnotation(e1,n1)
  hasAnnotation(e2,n1)

  note(n2,[ex:style="dotted"])
  hasAnnotation(u1,n2)
</pre>
<p>are serialized into:</p>
<pre class="example">
{
    ...
    "entity": {
        "e1": {
            "type": "document"
        },
        "e2": {
            "type": "document"
        }
    },
    "activity": {
        "a": {
            "recipeLink": "transform",
            "startTime": t1,
            "endTime": t2,
        },
    },
    "note": {
        "n1": {
            "ex:icon": "doc.png"
        },
        "n2": {
            "ex:style": "dotted"
        },
    },
    "hasAnnotation": {
        "_:hA1": {
            "record": "e1",
            "note": "n1"
        },
        "_:hA2": {
            "record": "e2",
            "note": "n1"
        },
        "_:hA3": {
            "record": "u1",
            "note": "n2"
        },
    }
    "wasGeneratedBy": {
        "_:wGB1": {
            "entity": "e2",
            "activity": "a",
            "ex:file": "stdout"
        }
    },
    "used": {
        "u1": {
            "entity": "e1",
            "activity": "a",
            "ex:file": "stdin",
        }
    }
    ...
}
</pre>


</section>
</section>

<section  id="bundle">
<h3>Bundle</h3>

In this section, the PROV-JSON representation for the two PROV-DM's bundling constructs are introduced, i.e., <span class="nonterminal">record container</span>  and <span class="nonterminal">account record</span>.

<section id="RecordContainer">
<h4>Provenance Container</h4>

<p>A <a href="http://www.w3.org/TR/prov-dm/#RecordContainer">provenance container</a> is a house-keeping construct of PROV-DM used for bundling PROV-DM records. A PROV-JSON serialization represents an instance of provenance container.</p> 

<p>
The following container </p>
<pre class="example">
container([x http://example.org/], [acc1,acc2]
          account(acc1,http://example.org/asserter1,...)
          account(acc2,http://example.org/asserter1,...))
</pre>
<p> is represented as follows in PROV-JSON.</p>
<pre class="example">
{
    "prefix": {
        "x": "http://example.org/"
    },
    ...
    "account": {
        "acc1": {
            "asserter": "http://example.org/asserter1",
            ...
        },
        "acc2": {
            "asserter": "http://example.org/asserter2",
            ...
        }
    }
}
</pre>

</section>


<section id="record-Account">
<h3>Account Record</h3>

<p>In PROV-DM, an <a href="http://www.w3.org/TR/prov-dm/#record-Account">account record</a> is a wrapper of records with a dual purpose:  </p> 
<ul>
<li> It is the mechanism by which attribution of provenance can be assserted; it allows asserters to bundle up their assertions, and assert suitable attribution;
<li> It provides a scoping mechanism for record identifiers and for some contraints.</li>
</ul>


<p> An account is in PROV-DM is serialized into an object in the <span class="name">account</span> structure in a PROV-JSON representation. The following account record, for example,</p>
<pre class="example">
  account(acc0,
        http://example.org/asserter, 
          entity(e0, [ prov:type="File", ex:path="/shared/crime.txt", ex:creator="Alice" ])
          ...
          wasDerivedFrom(e2,e1)
          ...
          activity(a0,create-file,t)
          ...
          wasGeneratedBy(e0,a0,[])     
          ...
          wasAssociatedWith(a4, ag5, [prov:role="communicator"])  )
</pre>
<p>is encoded as:</p>
<pre class="example">
{
    ...
    "account": {
        "acc0": {
            "asserter": "http://example.org/asserter",
            <span class="code-comment">// The remaining records of acc0 are encoded as specified in the previous sections</span>
            "entity": { ... },
            "activity": { ... },
            "agent": [ ... ],
            "note": { ... },
            "wasAssociatedWith": { ... },
            "wasDerivedFrom": { ... },
            "wasGeneratedBy": { ... }
            
        }
    }
}
</pre>

<p>PROV-DM allows an account to be nested in another account. The following example shows account <span class="name">acc3</span> contains a nested account <span class="name">acc4</span>.</p>
<pre class="example">
  account(acc3,
        http://example.org/asserter1, 
          entity(e0, [ prov:type="File", ex:path="/shared/crime.txt", ex:creator="Alice" ])
          activity(a0,create-file,t)
          wasGeneratedBy(e0,a0,[])  
          account(acc4,
                 http://example.org/asserter2,
                 entity(e1, [ prov:type="File", ex:path="/shared/crime.txt", ex:creator="Alice", ex:content="" ])
                 activity(a0,copy-file,t)
                 wasGeneratedBy(e1,a0,[ex:fct="create"])
                 wasComplementOf(e1,e0)))</pre>
<p>In PROV-JSON, <span class="name">acc3</span> and its nested account <span class="name">acc4</span> are encoded into two separate accounts. However, their parent-child relationship is maintained by the <span class="name">parent</span> link from <span class="name">acc4</span> to account <span class="name">acc3</span>, as can be seen below.</p>

<pre class="example">
{
    ...
    "account": {
        "acc3": {
            "asserter": "http://example.org/asserter1",
            <span class="code-comment">// The remaining records of acc3</span>
            ...
        }
        "acc4": {
            "asserter": "http://example.org/asserter2",
            "parent": "acc3",
            <span class="code-comment">// The remaining records of acc4</span>
            ...
        }
    }
}
</pre>

</section>
</section>
</section>

<section id="extensibility-section"> 
<h2>Extensibility Points</h2>

<p>Since the PROV-JSON representation was developed to encode PROV-DM, it supports the <a href="http://www.w3.org/TR/prov-dm/#extensibility-section">extensibility points</a> provided by PROV-DM, allowing designers to specialize it to specific applications or domains. We summarize these extensibility points here:

<ul>
<li> Applications are free to introduce application-specific attributes, according to their perspective on the world. Attributes for a given application can be distinguished by qualifying them with a prefix denoting a namespace declared in a namespace declaration.

<p>The <a href="#prov-dm-namespace">PROV-DM namespace</a> declares a set of reserved attributes: <span class="name">type</span>, <span class="name">location</span>. In addition, PROV-JSON represents most PROV-DM records and their properties as properties of an element, and, therefore, all these names are reserved. Specifically, they are: <span class="name">wasGeneratedBy</span>, <span class="name">used</span>, <span class="name">wasDerivedFrom</span>, <span class="name">wasEventuallyDerivedFrom</span>, <span class="name">dependedOn</span>, <span class="name">wasControlledBy</span>, <span class="name">wasComplementOf</span>, <span class="name">wasInformedBy</span>, <span class="name">wasScheduledAfter</span>, <span class="name">wasRevisionOf</span>, <span class="name">hadParticipant</span>, <span class="name">hasNote</span>, <span class="name">asserter</span>, <span class="name">parent</span>, <span class="name">startTime</span>, <span class="name">endTime</span>, <span class="name">time</span>, <span class="name">agent</span>, <span class="name">activity</span>.</p>
</li>

<li>Note records allow arbitrary metadata to be associated with identifiable records of PROV-DM. Note records consist of name-value pairs. Like attributes, names are qualified by a namespace.</li>

<li> Qualifiers offer a mechanism to describe modalities of use, generation, and control. They consist of ordered sequence of name-value pairs. Such names are also qualified by namespaces.

<p>The <a href="#prov-dm-namespace">PROV-DM namespace</a> declares a reserved qualifier: <span class="name">role</span>.</p></li>

<li>Namespaces allow attributes and names to be qualified. </li>

<li>Subtyping is allowed by means of the reserved attribute <span class="name">type</span>.</li>

<li>Domain specific values can be expressed by means of typed literals. </li>
</ul>

<p>The PROV data model is designed to be application and technology independent, but specializations of PROV-DM are welcome and encouraged.  To ensure inter-operability, specializations of the PROV data model that exploit the extensibility points summarized in this section MUST preserve the semantics specified in this document. For instance, a qualified attribute on a domain specific entity record MUST represent an aspect of a characterized thing and this aspect MUST remain unchanged during the characterization's interval of this entity record.</p>


</section> 

<section id="prov-json-example" class="appendix"> 
<h2>PROV-JSON Serialization Example</h2>


<section> 
<h3>A File Scenario</h3>

<div class='issue'>TODO: Link to <a href="http://www.w3.org/TR/prov-dm/#prov-dm-example">PROV-DM's example section</a></div>

<p>This scenario is concerned with the evolution of a crime statistics
file (referred to as e0) stored on a shared file system and which
journalists Alice, Bob, Charles, David, and Edith can share and
edit. We consider various events in the evolution of file e0;
events listed below follow each other, unless otherwise specified.</p>



<p>
Event evt1: Alice creates (pe0) an empty file in /share/crime.txt.  We denote this e1.
</p>

<p>
Event evt2: Bob appends (pe1) the following line to /share/crime.txt:</p>
<pre>
There was a lot of crime in London last month.
</pre>
<p>We denote this e2.</p>

<p>Event evt3: Charles emails (pe2) the contents of /share/crime.txt, as an
attachment, which we refer to as e4. (We specifically refer to a copy of the file that is uploaded on the mail server.)
</p>

<p>
Event evt4: David edits (pe3) file /share/crime.txt as follows.</p>
<pre>
There was a lot of crime in London and New-York last month.
</pre>
<p>
We denote this e3.
</p>

<p>Event evt5: Edith emails (pe4) the contents of /share/crime.txt as an attachment, referred to as e5.
</p>

<p>Event evt6: between events evt4 and evt5, someone (unspecified) runs a spell checker (pe5) on the file /share/crime.txt.
 The file after spell checking is referred to as e6.
</p>

</section> 

<section id="example-prov-json-encoding"> 
<h3>Encoding using PROV-JSON</h3>

In this section, the example provided in the PROV-DM specification is encoded into the PROV-JSON representation (specified in section <a href="#prov-json-representation">PROV-JSON: Representing the Provenance Data Model in JSON</a>).
<p>
<a href="http://www.w3.org/TR/prov-dm/#record-Entity">Entity Records</a>: The file in its various forms and its copies are modelled as entity records, corresponding to multiple characterizations, as per scenario. The entity records are identified by  <span class="name">e0</span>, ..., <span class="name">e6</span>.</p>
<pre>
{
    ...
    <span class="code-new">"entity": {
        <span class="code-comment">// entity(e0, [ type="File", location="/shared/crime.txt", creator="Alice" ])</span>
        "e0": {
            "type": "File",
            "location": "/shared/crime.txt",
            "creator": "Alice"
        },
        <span class="code-comment">// entity(e1, [ type="File", location="/shared/crime.txt", creator="Alice", content="" ])</span>
        "e1": {
            "type": "File",
            "location": "/shared/crime.txt",
            "creator": "Alice",
            "content": ""
        },
        <span class="code-comment">// entity(e2, [ type="File", location="/shared/crime.txt", creator="Alice", content="There was a lot of crime in London last month." ])</span>
        "e2": {
            "type": "File",
            "location": "/shared/crime.txt",
            "creator": "Alice",
            "content": "There was a lot of crime in London last month."
        },
        <span class="code-comment">// entity(e2, [ type="File", location="/shared/crime.txt", creator="Alice", content="There was a lot of crime in London and New York last month." ])</span>
        "e3": {
            "type": "File",
            "location": "/shared/crime.txt",
            "creator": "Alice",
            "content": "There was a lot of crime in London and New York last month."
        },
        <span class="code-comment">// entity(e4, [ ])</span>
        "e4": {
        },
        <span class="code-comment">// entity(e5, [ ])</span>
        "e5": {
        },
        <span class="code-comment">// entity(e6, [ type="File", location="/shared/crime.txt", creator="Alice", content="There was a lot of crime in London and New York last month.", spellchecked="yes"])</span>
        "e6": {
            "type": "File",
            "location": "/shared/crime.txt",
            "creator": "Alice",
            "content": "There was a lot of crime in London and New York last month.",
            "spellchecked": "yes"
        }
    },</span>
    ...
}
</pre>

<p>
<a href="http://www.w3.org/TR/prov-dm/#record-Activity">Activity Records</a> represent activities in the scenario.</p>

<pre>
{
    ...
    <span class="code-new">"activity": {
        <span class="code-comment">// activity(pe0,create-file,t,,[])</span>
        "pe0" : {
            "recipeLink": "create-file",
            "startTime": t
        },
        <span class="code-comment">// activity(pe1,add-crime-in-london,t+1,,[])</span>
        "pe1" : {
            "recipeLink": "add-crime-in-london",
            "startTime": t+1
        },
        <span class="code-comment">// activity(pe2,email,t+2,,[])</span>
        "pe2" : {
            "recipeLink": "email",
            "startTime": t+2
        },
        <span class="code-comment">// activity(pe3,edit-London-New-York,t+3,,[])</span>
        "pe3" : {
            "recipeLink": "edit-London-New-York",
            "startTime": t+3
        },
        <span class="code-comment">// activity(pe4,email,t+4,,[])</span>
        "pe4" : {
            "recipeLink": "email",
            "startTime": t+4
        },
        <span class="code-comment">// activity(pe5,spellcheck,,,[])</span>
        "pe5" : {
            "recipeLink": "spellcheck"
        },
    },</span>
    ...
}
</pre>

<p>
<a href="http://www.w3.org/TR/prov-dm/#record-Generation">Generation Records</a> represent the event at which a file is created in a specific form. To describe the modalities according to which the various characterized things are generated by a given activity, a qualifier  (record described in <a href="http://www.w3.org/TR/prov-dm/#record-qualifier">PROV-DM</a>) is introduced.  The interpretation of qualifiers is application specific. Illustrations of such qualifiers for the scenario are: no qualifier is provided for <span class="name">e0</span>;
<span class="name">e2</span> was generated by the editor's  save function;  <span class="name">e4</span> can be found on the smtp port, in the attachment section of the mail message;<span class="name">e6</span> was produced on the standard output of <span class="name">pe5</span>.</p>

<pre>
{
    ...
    <span class="code-new">"wasGeneratedBy": {
        <span class="code-comment">// wasGeneratedBy(e0, pe0, qualifier())</span>
        "_:wGB1": {
            "effect": "e0",
            "cause": "pe0"
        },
        <span class="code-comment">// wasGeneratedBy(e1, pe0, qualifier(ex:fct="create"))</span>
        "_:wGB2": {
            "effect": "e1",
            "cause": "pe0",
            "fct": "ex:create"
        },
        <span class="code-comment">// wasGeneratedBy(e2, pe1, qualifier(ex:fct="save"))</span>
        "_:wGB3": {
            "effect": "e2",
            "cause": "pe1",
            "fct": "ex:save"
        },
        <span class="code-comment">// wasGeneratedBy(e3, pe3, qualifier(ex:fct="save"))</span>
        "_:wGB4": {
            "effect": "e3",
            "cause": "pe3",
            "fct": "ex:save"
        },
        <span class="code-comment">// wasGeneratedBy(e4, pe2, qualifier(ex:port="smtp", ex:section="attachment"))</span>
        "_:wGB5": {
            "effect": "e4",
            "cause": "pe2",
            "port": "ex:smtp",
            "section": "ex:attachment"
        },
        <span class="code-comment">// wasGeneratedBy(e5, pe4, qualifier(ex:port="smtp", ex:section="attachment"))</span>
        "_:wGB6": {
            "effect": "e5",
            "cause": "pe4",
            "port": "ex:smtp",
            "section": "ex:attachment"
        },
        <span class="code-comment">// wasGeneratedBy(e6, pe5, qualifier(ex:file="stdout"))</span>
        "_:wGB7": {
            "effect": "e6",
            "cause": "pe5",
            "ex:file": "stdout"
        }
    },</span>
    ...
}
</pre>

<p>
<a href="http://www.w3.org/TR/prov-dm/#record-Use">Used Records</a> represent the event by which a file is read by a Activity. 

Likewise, to describe the modalities according to which the various things are used by activities, a qualifier is introduced.  Illustrations of such qualifiers are: <span class="name">e1</span> is used in the context of  <span class="name">pe1</span>'s <span class="name">load</span> functionality; <span class="name">e2</span> is used by <span class="name">pe2</span> in the context of its attach functionality; <span class="name">e3</span> is used on the standard input by <span class="name">pe5</span>. </p>

<pre>
{
    ...
    <span class="code-new">"used" : {
        <span class="code-comment">// used(pe1,e1,qualifier(ex:fct="load"))</span>
        "_:u1": {
            "effect": "pe1",
            "cause": "e1",
            "ex:fct": "load"
        },
        <span class="code-comment">// used(pe2,e2,qualifier(ex:fct="attach"))</span>
        "_:u2": {
            "effect": "pe2",
            "cause": "e2",
            "ex:fct": "attach"
        },
        <span class="code-comment">// used(pe3,e2,qualifier(ex:fct="load"))</span>
        "_:u3": {
            "effect": "pe3",
            "cause": "e2",
            "ex:fct": "load"
        },
        <span class="code-comment">// used(pe4,e3,qualifier(ex:fct="attach"))</span>
        "_:u4": {
            "effect": "pe4",
            "cause": "e3",
            "ex:fct": "attach"
        },
        <span class="code-comment">// used(pe5,e3,qualifier(ex:file="stdin"))</span>
        "_:u5": {
            "effect": "pe5",
            "cause": "e3",
            "ex:file": "stdin"
        }
    },</span>
    ...
}
</pre>

<p>
<a href="http://www.w3.org/TR/prov-dm/#record-Derivation">Derivation Records</a> express that an entity is derived from another.  The first two are expressed in their compact version, whereas the following two are expressed in their full version, including the Activity underpinnng the derivation, and relevant qualifiers qualifying the use and generation of entities.</p>

<pre>
{
    ...
    <span class="code-new">"wasDerivedFrom": {
        <span class="code-comment">// wasDerivedFrom(e2,e1)</span>
        "_:wDF1": {
            "effect": "e2",
            "cause": "e1",
        },
        <span class="code-comment">// wasDerivedFrom(e3,e2)</span>
        "_:wDF2": {
            "effect": "e3",
            "cause": "e2"
        },
        <span class="code-comment">// wasDerivedFrom(e4,e2,pe2,qualifier(port=smtp, section="attachment"),qualifier(fct="attach"))</span>
        "_:wDF3": {
            "activity": "pe2",
            "effect": "e4",
            "cause": "e2",
            "effectWGB": "_:wGB5",
            "causeU": "_:u2"
        },
        <span class="code-comment">// wasDerivedFrom(e5,e3,pe4,qualifier(port=smtp, section="attachment"),qualifier(fct="attach"))</span>
        "_:wDF4": {
            "activity": "pe4"
            "effect": "e5",
            "cause": "e3",
            "effectWGB": "_:wGB6",
            "causeU": "_:u4"
        }
    },
    ...
}
</pre>

<p><a href="http://www.w3.org/TR/prov-dm/#record-complement-of">wasComplementOf</a>: The crime statistics file (<span class="name">e0</span>) has various contents over its existence (<span class="name">e1</span>, <span class="name">e2</span>, <span class="name">e3</span>); the entity records identified by <span class="name">e1</span>, <span class="name">e2</span>, <span class="name">e3</span> complement <span class="name">e0</span> with an attribute <span class="name">content</span>.  Likewise, the one denoted by <span class="name">e6</span> complements the record denoted by <span class="name">e3</span> with an attribute <span class="name">spellchecked</span>.</p>

<pre>
{
    ...
    <span class="code-new">"wasComplementOf": {
        <span class="code-comment">// wasComplementOf(e1,e0)</span>
        "_:wCO1": {
            "subject": e1,
            "alternate": e0
        },
        <span class="code-comment">// wasComplementOf(e2,e0)</span>
        "_:wCO2": {
            "subject": e2,
            "alternate": e0
        },
        <span class="code-comment">// wasComplementOf(e3,e0)</span>
        "_:wCO3": {
            "subject": e3,
            "alternate": e0
        },
        <span class="code-comment">// wasComplementOf(e6,e3)</span>
        "_:wCO3": {
            "subject": e6,
            "alternate": e3
        }</span>
    },
    ...
}
</pre>

<p>
<a href="http://www.w3.org/TR/prov-dm/#record-Agent">Agent Records</a>: the various users are represented as agents, themselves being a type of entity.</p>

<pre>
{
    ...
    "entity": {
        <span class="code-new"><span class="code-comment">// entity(a1, [ type="Person", foaf:name="Alice" ])</span>
        "a1": {
            "type": "Person",
            "foaf:name": "Alice"
        },
        <span class="code-comment">// entity(a1, [ type="Person", foaf:name="Bob" ])</span>
        "a2": {
            "type": "Person",
            "foaf:name": "Bob"
        },
        <span class="code-comment">// entity(a1, [ type="Person", foaf:name="Charles" ])</span>
        "a3": {
            "type": "Person",
            "foaf:name": "Charles"
        },
        <span class="code-comment">// entity(a1, [ type="Person", foaf:name="David" ])</span>
        "a4": {
            "type": "Person",
            "foaf:name": "David"
        },
        <span class="code-comment">// entity(a1, [ type="Person", foaf:name="Edith" ])</span>
        "a5": {
            "type": "Person",
            "foaf:name": "Edith"
        },</span>
        ...
    },
    <span class="code-new">"agent": [
        "a1", <span class="code-comment">// agent(a1)</span>
        "a2", <span class="code-comment">// agent(a2)</span>
        "a3", <span class="code-comment">// agent(a3)</span>
        "a4", <span class="code-comment">// agent(a4)</span>
        "a5"  <span class="code-comment">// agent(a5)</span>
    ],</span>
    ...
}
</pre>


<p>
<a href="http://www.w3.org/TR/prov-dm/#record-Control">Control Records</a>: the influence of an agent over a Activity is expressed as control, and the nature of this influence is described by qualifier.  Illustrations of such qualifiers include the role of the participating agent, as creator, author and communicator.</p>

<pre>
{
    ...
    <span class="code-new">"wasControlledBy": {
        <span class="code-comment">// wasControlledBy(pe0,a1, qualifier(role="creator"))</span>
        "_:wCB1": {
            "effect" : "pe0",
            "cause" : "a1",
            "role": "creator"
        },
        <span class="code-comment">// wasControlledBy(pe1,a2, qualifier(role="author"))</span>
        "_:wCB2": {
            "effect" : "pe1",
            "cause" : "a2",
            "role": "author"
        },
        <span class="code-comment">// wasControlledBy(pe2,a3, qualifier(role="communicator"))</span>
        "_:wCB3": {
            "effect" : "pe2",
            "cause" : "a3",
            "role": "communicator"
        },
        <span class="code-comment">// wasControlledBy(pe3,a4, qualifier(role="author"))</span>
        "_:wCB4": {
            "effect" : "pe3",
            "cause" : "a4",
            "role": "author"
        },
        <span class="code-comment">// wasControlledBy(pe4,a5, qualifier(role="communicator"))</span>
        "_:wCB5": {
            "effect" : "pe4",
            "cause" : "a5",
            "role": "communicator"
        }
    },</span>
    ...
}
</pre>
</section> 


<section class="appendix"> 
<h2>Acknowledgements</h2> 
<p>This specification was developed based on the PROV-DM Specification [[PROV-DM]] and reused significant content therefrom to provide consistent mappings between the two documents.</p>
<p>Contributions to be listed here.</p> 
</section> 
   
 </body></html>
